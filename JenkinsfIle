pipeline {
  agent {
    label 'ETQA-MAC2'
  }

  stages {
    stage('build and test') {

      steps {
        sh 'npm --version'
        sh 'yarn install --frozen-lockfile'
        sh 'yarn cypress:run --env testEnv=stg  --spec "cypress/integration/e2e/*" --reporter=junit'
        junit 'test-results.xml'
      }
    }
  }
}